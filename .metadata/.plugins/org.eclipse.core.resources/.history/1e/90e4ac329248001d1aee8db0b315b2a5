<%@page import="com.itwillbs.board.BoardDTO"%>
<%@page import="java.util.ArrayList"%>
<%@page import="com.itwillbs.board.BoardDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

	<h1>boardList.jsp</h1>
	
	<%
	// DB에 저장된 글 목록 정보 가져오기
	BoardDAO dao = new BoardDAO();
	
	// 저장된 전체 글 개수
	int count = dao.getBoardCount();
	
	// ========================================================
	// 페이징 처리(1) DB에서 원하는 만큼의 글 정보 가져오기

	// pageSize : 한 페이지에 보여줄 글 개수
	int pageSize = 10;
	
	// pageNum : 현재 페이지 번호
	String pageNum = request.getParameter("pageNum");
	
	// 만약 페이지 번호가 없으면 현재 페이지가 첫 페이지가 되도록 설정
	if(pageNum==null){
		pageNum="1";
	}
	
	// ex) 한 페이지당 글 10개 출력, 현재 페이지 2 => bno 11~20번 글 출력
	// startRow : 시작행(1, 11, 21, 31, ...)
	int currentPage = Integer.parseInt(pageNum);
	int startRow = (currentPage-1)*pageSize+1;

	// endRow : 끝행(10, 20, 30, ...)
	int endRow = currentPage*pageSize;
	
	// ========================================================
	
	// 가져온 정보 배열에 저장
// 	ArrayList boardList = dao.getBoardList();
	
	// 표 형식으로 출력하기
	%>

	<h3><a href="writeForm.jsp">글쓰기</a></h3>
	<table border="1">
	<tr>
        <th>번호</th>
        <th>제목</th>
        <th>작성자</th>
        <th>조회수</th>
        <th>작성일</th>
        <th>ip</th>
    </tr>
   		<%
    	for(int i=0;i<boardList.size();i++){
    		// 배열에 담긴 정보 하나씩 꺼내서 dto에 저장
    		BoardDTO dto = (BoardDTO) boardList.get(i);
    	%>

    <tr>
        <td><%=dto.getBno() %></td>
        <td><%=dto.getSubject()%></td>
        <td><%=dto.getName() %></td>
        <td><%=dto.getReadcount() %></td>
        <td><%=dto.getDate() %></td>
        <td><%=dto.getIp() %></td>
    </tr>
    
		<%
    	}
		%>    
	</table>
	
	<%
	// ========================================================
	// 페이징 처리(2) [이전], 페이지 번호, [다음]
	
	// ========================================================
	%>
	
	
	
</body>
</html>